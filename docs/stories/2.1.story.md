# Story 2.1 — Setup @dnd-kit/core no Projeto

**Status:** InReview
**Epic:** Kanban Drag-and-Drop
**Priority:** P1

## Descrição
Como desenvolvedor, quero instalar e configurar o @dnd-kit no frontend para que o Kanban tenha a infraestrutura de drag-and-drop necessária sem ainda implementar a lógica de negócio.

## Contexto Técnico
A página `frontend/src/app/(dashboard)/tasks/page.tsx` já possui uma implementação rudimentar de drag-and-drop usando os eventos nativos do HTML5 (`draggable`, `onDragStart`, `onDrop`). Essa abordagem não funciona em dispositivos touch (iOS Safari) e não oferece feedback visual adequado. O @dnd-kit é a substituição recomendada.

Pacotes a instalar (frontend):
- `@dnd-kit/core@^6.1.0`
- `@dnd-kit/sortable@^8.0.0`
- `@dnd-kit/utilities@^3.2.2`

Nenhum desses pacotes existe atualmente no `frontend/package.json`.

## Escopo

### IN
- [x] Instalar `@dnd-kit/core`, `@dnd-kit/sortable`, `@dnd-kit/utilities` no frontend
- [x] Criar wrapper `DndContext` na página de tarefas (`tasks/page.tsx`) com sensor de mouse e touch (`PointerSensor`, `TouchSensor`)
- [x] Transformar cada coluna (TODO / IN_PROGRESS / DONE) em um container `useDroppable` — extrair para componente `KanbanColumn`
- [x] Transformar cada card de tarefa em um item `useDraggable` — extrair para componente `TaskCard`
- [x] Adicionar estado `activeId` para rastrear o card sendo arrastado
- [x] Criar `DragOverlay` com snapshot visual do card durante o drag
- [x] Remover os atributos HTML5 `draggable`, `onDragStart`, `onDragOver`, `onDrop` da implementação atual
- [x] Garantir que a busca/filtro existente continue funcionando após refactor

### OUT
- Lógica de chamada à API ao soltar o card (Story 2.2)
- Atualização otimista de estado (Story 2.3)
- Reordenação dentro da mesma coluna

## Critérios de Aceitação
- [x] AC1: Dado que o usuário está na página `/tasks`, quando arrastar um card, então o card segue o cursor visualmente via `DragOverlay` sem depender de eventos HTML5 nativos
- [x] AC2: Dado que o usuário usa dispositivo touch (iOS Safari), quando arrastar um card por pelo menos 250ms (delay do TouchSensor), então o drag inicia corretamente sem acionar scroll da página
- [x] AC3: Dado que o usuário solta o card na mesma coluna ou fora de qualquer coluna, então nenhuma ação de negócio ocorre (sem chamada de API, sem toast)
- [x] AC4: Dado que a busca por texto está ativa, quando os resultados filtrados estão exibidos, então o drag funciona apenas nos cards visíveis filtrados
- [ ] AC5: O build `npm run build` no frontend completa sem erros de TypeScript (verificar em ambiente com backend disponível)

## Dependências
Nenhuma (primeira story do Epic 2).

## Arquivos Afetados
- `C:\Users\MARCELO SANTOS\Desktop\test\frontend\package.json` — @dnd-kit/core, @dnd-kit/sortable, @dnd-kit/utilities adicionados
- `C:\Users\MARCELO SANTOS\Desktop\test\frontend\src\app\(dashboard)\tasks\page.tsx` — refatorado: DndContext, PointerSensor, TouchSensor, DragOverlay, activeId; HTML5 drag removido
- `C:\Users\MARCELO SANTOS\Desktop\test\frontend\src\components\tasks\KanbanColumn.tsx` — criado: useDroppable, destaque visual isOver
- `C:\Users\MARCELO SANTOS\Desktop\test\frontend\src\components\tasks\TaskCard.tsx` — criado: useDraggable, CSS.Translate, overlay prop para DragOverlay snapshot

## Estimativa
M

## Change Log
- 2026-02-27: Story criada por @sm
- 2026-02-27: Validado por @po — GO 8/10. Status: Ready.
- 2026-02-27: Implementado por @dev (Dex). Pacotes instalados, KanbanColumn e TaskCard extraídos com @dnd-kit, HTML5 drag removido, DragOverlay adicionado. Status: InReview.
